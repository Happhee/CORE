{"ast":null,"code":"import _toConsumableArray from\"/Users/hongseohee/core-client-aws/CORE/core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/hongseohee/core-client-aws/CORE/core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/*eslint-disable */import React,{useEffect,useState}from'react';import{ReactComponent as Core_Logo}from\"@svgr/webpack?-svgo,+titleProp,+ref!../css/Core.svg\";import'../css/ClassRoom.css';import{Link}from'react-router-dom';import Toolbar from'./Toolbar';import CoreDialog from'./CoreDialog';import{useLocation,useHistory}from'react-router-dom';//로그인 성공 후 페이지 -> 서버로부터 강의실리스트를 가져와야함 \nimport{useDispatch}from'react-redux';import{getUser}from'../_actions/user_action';import{addClassroom,createClassroom}from'../_actions/teacher_action';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ClassRoom(_ref){var match=_ref.match;var toolbar=[{id:1,title:'My',link:'/teacher/my'},{id:2,title:'WorkBank',link:'/teacher/workbank'}];var mode=match.params.mode;var location=useLocation();var history=useHistory();console.log(location.state.login_id);var startpage=null;var add_button=null;var dialog=null;//서버로 부터 강의실 목록 가져오기 \nvar dispatch=useDispatch();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),classrooms=_useState2[0],setClassrooms=_useState2[1];var objectClassroom=[];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),class_id=_useState4[0],setClass_id=_useState4[1];useEffect(function(){//클래스룸 가져오기\ndispatch(getUser(location.state.login_id)).then(function(res){if(res.payload.getSuccess){res.payload.data.belonged_classes.map(function(data){objectClassroom.push({title:data.title,class_id:data.class_id});});setClassrooms(objectClassroom);}else{console.log(res.payload);}});},[]);console.log(classrooms);function insertClassroom(value){var class_id=location.state.login_id+Date.now();var body={nick:location.state.login_id,belonged_classes:[{title:value,class_id:class_id}]};dispatch(addClassroom(body)).then(function(res){console.log(\"업데이트 ->\");console.log(res.payload);if(res.payload.updateSuccess){setClassrooms(function(preClassrooms){return[].concat(_toConsumableArray(preClassrooms),[body.belonged_classes[0]]);});}else{alert(res.payload.message);}}).catch(function(err){console.log(err);});var class_body={name:value,classroom_master:location.state.login_id,class_id:class_id};dispatch(createClassroom(class_body)).then(function(res){console.log(\"강의실 ->\");console.log(res.payload);if(res.payload.createClassroom){setClass_id(class_body.class_id);console.log(res.payload.message);}else{console.log(res.payload.message);}}).catch(function(err){console.log(err);});}var text_data=[{id:1,label:\"강의실명\",name:\"classroom\",value:''}];if(mode=='teacher'){startpage='student';add_button=[/*#__PURE__*/_jsx(\"div\",{className:\"add_class_box\",children:/*#__PURE__*/_jsx(CoreDialog,{button_box:\"add_class_box\",button_value:\"+\",dialog_title:\"\\uAC15\\uC758\\uC2E4 \\uCD94\\uAC00\\uD558\\uAE30\",text_data:text_data,handleFormSubmit:function handleFormSubmit(classroom){insertClassroom(classroom[0].value);}},\"add\")},\"add\")];}// 툴바 모드 바꿔주기 \nelse if(mode=='student'){startpage='workbook';toolbar[1].title='FeedBank';toolbar[0].link='/student/my';toolbar[1].link='/student/feedbank';}var class_list=classrooms.map(function(classroom,index){return/*#__PURE__*/_jsx(\"div\",{className:\"click_box\",children:/*#__PURE__*/_jsx(\"span\",{className:\"link\",onClick:function onClick(){history.push({pathname:\"../../mainpage/\"+mode+\"/\"+startpage,state:{classroom_title:classroom.title,id:location.state.login_id,class_id:classroom.class_id}});},children:classroom.title},index)},index);});console.log('강의실렌더링');return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Toolbar,{data:toolbar}),/*#__PURE__*/_jsxs(\"div\",{className:\"classroom_box\",children:[/*#__PURE__*/_jsx(Core_Logo,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"title_box\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\uB098\\uC758 \\uAC15\\uC758\\uC2E4\"})}),class_list,add_button]})]})]});};export default ClassRoom;","map":{"version":3,"sources":["/Users/hongseohee/core-client-aws/CORE/core/src/components/ClassRoom.js"],"names":["React","useEffect","useState","Link","Toolbar","CoreDialog","useLocation","useHistory","useDispatch","getUser","addClassroom","createClassroom","ClassRoom","match","toolbar","id","title","link","mode","params","location","history","console","log","state","login_id","startpage","add_button","dialog","dispatch","classrooms","setClassrooms","objectClassroom","class_id","setClass_id","then","res","payload","getSuccess","data","belonged_classes","map","push","insertClassroom","value","Date","now","body","nick","updateSuccess","preClassrooms","alert","message","catch","err","class_body","name","classroom_master","text_data","label","classroom","class_list","index","pathname","classroom_title"],"mappings":"4UAAA,mBACA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,C,6FAEA,MAAO,sBAAP,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,OAASC,WAAT,CAAsBC,UAAtB,KAAwC,kBAAxC,CAGA;AACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,OAAT,KAAwB,yBAAxB,CACA,OAASC,YAAT,CAAuBC,eAAvB,KAA8C,4BAA9C,C,wFAEA,QAASC,CAAAA,SAAT,MAA8B,IAATC,CAAAA,KAAS,MAATA,KAAS,CAC1B,GAAIC,CAAAA,OAAO,CAAG,CACV,CAAEC,EAAE,CAAE,CAAN,CAASC,KAAK,CAAE,IAAhB,CAAsBC,IAAI,CAAE,aAA5B,CADU,CAEV,CAAEF,EAAE,CAAE,CAAN,CAASC,KAAK,CAAE,UAAhB,CAA4BC,IAAI,CAAE,mBAAlC,CAFU,CAAd,CAIA,GAAQC,CAAAA,IAAR,CAAiBL,KAAK,CAACM,MAAvB,CAAQD,IAAR,CACA,GAAME,CAAAA,QAAQ,CAAGd,WAAW,EAA5B,CACA,GAAMe,CAAAA,OAAO,CAAGd,UAAU,EAA1B,CACAe,OAAO,CAACC,GAAR,CAAYH,QAAQ,CAACI,KAAT,CAAeC,QAA3B,EAEA,GAAIC,CAAAA,SAAS,CAAG,IAAhB,CACA,GAAIC,CAAAA,UAAU,CAAG,IAAjB,CACA,GAAIC,CAAAA,MAAM,CAAG,IAAb,CACA;AAEA,GAAMC,CAAAA,QAAQ,CAAGrB,WAAW,EAA5B,CACA,cAAkCN,QAAQ,CAAC,EAAD,CAA1C,wCAAK4B,UAAL,eAAiBC,aAAjB,eACA,GAAIC,CAAAA,eAAe,CAAG,EAAtB,CAEA,eAA8B9B,QAAQ,CAAC,EAAD,CAAtC,yCAAK+B,QAAL,eAAeC,WAAf,eACAjC,SAAS,CAAC,UAAM,CAEZ;AACA4B,QAAQ,CAACpB,OAAO,CAACW,QAAQ,CAACI,KAAT,CAAeC,QAAhB,CAAR,CAAR,CACKU,IADL,CACU,SAAAC,GAAG,CAAI,CACT,GAAIA,GAAG,CAACC,OAAJ,CAAYC,UAAhB,CAA4B,CAExBF,GAAG,CAACC,OAAJ,CAAYE,IAAZ,CAAiBC,gBAAjB,CAAkCC,GAAlC,CAAsC,SAACF,IAAD,CAAU,CAC5CP,eAAe,CAACU,IAAhB,CAAqB,CAAE1B,KAAK,CAAEuB,IAAI,CAACvB,KAAd,CAAqBiB,QAAQ,CAAEM,IAAI,CAACN,QAApC,CAArB,EACH,CAFD,EAIAF,aAAa,CAACC,eAAD,CAAb,CACH,CAPD,IAQK,CACDV,OAAO,CAACC,GAAR,CAAYa,GAAG,CAACC,OAAhB,EACH,CACJ,CAbL,EAcH,CAjBQ,CAiBN,EAjBM,CAAT,CAkBAf,OAAO,CAACC,GAAR,CAAYO,UAAZ,EAEA,QAASa,CAAAA,eAAT,CAAyBC,KAAzB,CAAgC,CAC5B,GAAIX,CAAAA,QAAQ,CAAGb,QAAQ,CAACI,KAAT,CAAeC,QAAf,CAA0BoB,IAAI,CAACC,GAAL,EAAzC,CACA,GAAIC,CAAAA,IAAI,CAAG,CACPC,IAAI,CAAE5B,QAAQ,CAACI,KAAT,CAAeC,QADd,CAEPe,gBAAgB,CAAE,CAAC,CAAExB,KAAK,CAAE4B,KAAT,CAAgBX,QAAQ,CAAEA,QAA1B,CAAD,CAFX,CAAX,CAKAJ,QAAQ,CAACnB,YAAY,CAACqC,IAAD,CAAb,CAAR,CACKZ,IADL,CACU,SAAAC,GAAG,CAAI,CACTd,OAAO,CAACC,GAAR,CAAY,SAAZ,EAEAD,OAAO,CAACC,GAAR,CAAYa,GAAG,CAACC,OAAhB,EACA,GAAID,GAAG,CAACC,OAAJ,CAAYY,aAAhB,CAA+B,CAC3BlB,aAAa,CAAC,SAAAmB,aAAa,qCAAQA,aAAR,GAAuBH,IAAI,CAACP,gBAAL,CAAsB,CAAtB,CAAvB,IAAd,CAAb,CACH,CAFD,IAGK,CACDW,KAAK,CAACf,GAAG,CAACC,OAAJ,CAAYe,OAAb,CAAL,CACH,CACJ,CAXL,EAWOC,KAXP,CAWa,SAAAC,GAAG,CAAI,CACZhC,OAAO,CAACC,GAAR,CAAY+B,GAAZ,EACH,CAbL,EAeA,GAAIC,CAAAA,UAAU,CAAG,CACbC,IAAI,CAAEZ,KADO,CAEba,gBAAgB,CAAErC,QAAQ,CAACI,KAAT,CAAeC,QAFpB,CAGbQ,QAAQ,CAAEA,QAHG,CAAjB,CAMAJ,QAAQ,CAAClB,eAAe,CAAC4C,UAAD,CAAhB,CAAR,CACKpB,IADL,CACU,SAAAC,GAAG,CAAI,CACTd,OAAO,CAACC,GAAR,CAAY,QAAZ,EACAD,OAAO,CAACC,GAAR,CAAYa,GAAG,CAACC,OAAhB,EACA,GAAID,GAAG,CAACC,OAAJ,CAAY1B,eAAhB,CAAiC,CAC7BuB,WAAW,CAACqB,UAAU,CAACtB,QAAZ,CAAX,CACAX,OAAO,CAACC,GAAR,CAAYa,GAAG,CAACC,OAAJ,CAAYe,OAAxB,EACH,CAHD,IAIK,CACD9B,OAAO,CAACC,GAAR,CAAYa,GAAG,CAACC,OAAJ,CAAYe,OAAxB,EACH,CACJ,CAXL,EAWOC,KAXP,CAWa,SAACC,GAAD,CAAS,CACdhC,OAAO,CAACC,GAAR,CAAY+B,GAAZ,EACH,CAbL,EAeH,CAKD,GAAII,CAAAA,SAAS,CAAG,CACZ,CAAE3C,EAAE,CAAE,CAAN,CAAS4C,KAAK,CAAE,MAAhB,CAAwBH,IAAI,CAAE,WAA9B,CAA2CZ,KAAK,CAAE,EAAlD,CADY,CAAhB,CAIA,GAAI1B,IAAI,EAAI,SAAZ,CAAuB,CACnBQ,SAAS,CAAG,SAAZ,CACAC,UAAU,CAAG,cACT,YAAK,SAAS,CAAC,eAAf,uBACI,KAAC,UAAD,EAAsB,UAAU,CAAC,eAAjC,CAAiD,YAAY,CAAC,GAA9D,CACI,YAAY,CAAC,6CADjB,CAC4B,SAAS,CAAE+B,SADvC,CACkD,gBAAgB,CAAE,0BAAUE,SAAV,CAAqB,CACjFjB,eAAe,CAACiB,SAAS,CAAC,CAAD,CAAT,CAAahB,KAAd,CAAf,CAEH,CAJL,EAAgB,KAAhB,CADJ,EAAmC,KAAnC,CADS,CAAb,CAWH,CACD;AAdA,IAeK,IAAI1B,IAAI,EAAI,SAAZ,CAAuB,CACxBQ,SAAS,CAAG,UAAZ,CACAZ,OAAO,CAAC,CAAD,CAAP,CAAWE,KAAX,CAAmB,UAAnB,CACAF,OAAO,CAAC,CAAD,CAAP,CAAWG,IAAX,CAAkB,aAAlB,CACAH,OAAO,CAAC,CAAD,CAAP,CAAWG,IAAX,CAAkB,mBAAlB,CAEH,CAED,GAAM4C,CAAAA,UAAU,CAAG/B,UAAU,CAACW,GAAX,CAAe,SAACmB,SAAD,CAAYE,KAAZ,qBAC9B,YAAK,SAAS,CAAC,WAAf,uBACI,aAAM,SAAS,CAAC,MAAhB,CACI,OAAO,CAAE,kBAAM,CACXzC,OAAO,CAACqB,IAAR,CAAa,CACTqB,QAAQ,CAAE,kBAAoB7C,IAApB,CAA2B,GAA3B,CAAiCQ,SADlC,CAETF,KAAK,CAAE,CACHwC,eAAe,CAAEJ,SAAS,CAAC5C,KADxB,CAEHD,EAAE,CAAEK,QAAQ,CAACI,KAAT,CAAeC,QAFhB,CAGHQ,QAAQ,CAAE2B,SAAS,CAAC3B,QAHjB,CAFE,CAAb,EAQH,CAVL,UAWE2B,SAAS,CAAC5C,KAXZ,EAA4B8C,KAA5B,CADJ,EAAgCA,KAAhC,CAD8B,EAAf,CAAnB,CAiBAxC,OAAO,CAACC,GAAR,CAAY,QAAZ,EAIA,mBACI,oCACI,KAAC,OAAD,EAAS,IAAI,CAAET,OAAf,EADJ,cAGI,aAAK,SAAS,CAAC,eAAf,wBACI,KAAC,SAAD,IADJ,cAEI,aAAK,SAAS,CAAC,SAAf,wBAEI,YAAK,SAAS,CAAC,WAAf,uBACI,yDADJ,EAFJ,CAKK+C,UALL,CAMKlC,UANL,GAFJ,GAHJ,GADJ,CAkBH,EAED,cAAef,CAAAA,SAAf","sourcesContent":["/*eslint-disable */\nimport React, { useEffect, useState } from 'react';\nimport { ReactComponent as Core_Logo } from '../css/Core.svg';\nimport '../css/ClassRoom.css';\nimport { Link } from 'react-router-dom';\nimport Toolbar from './Toolbar';\nimport CoreDialog from './CoreDialog';\nimport { useLocation, useHistory } from 'react-router-dom';\n\n\n//로그인 성공 후 페이지 -> 서버로부터 강의실리스트를 가져와야함 \nimport { useDispatch } from 'react-redux'\nimport { getUser } from '../_actions/user_action';\nimport { addClassroom, createClassroom } from '../_actions/teacher_action'\n\nfunction ClassRoom({ match }) {\n    let toolbar = [\n        { id: 1, title: 'My', link: '/teacher/my' },\n        { id: 2, title: 'WorkBank', link: '/teacher/workbank' }];\n\n    const { mode } = match.params;\n    const location = useLocation();\n    const history = useHistory();\n    console.log(location.state.login_id);\n\n    let startpage = null;\n    let add_button = null;\n    let dialog = null;\n    //서버로 부터 강의실 목록 가져오기 \n\n    const dispatch = useDispatch();\n    let [classrooms, setClassrooms] = useState([])\n    let objectClassroom = []\n\n    let [class_id, setClass_id] = useState([]);\n    useEffect(() => {\n\n        //클래스룸 가져오기\n        dispatch(getUser(location.state.login_id))\n            .then(res => {\n                if (res.payload.getSuccess) {\n\n                    res.payload.data.belonged_classes.map((data) => {\n                        objectClassroom.push({ title: data.title, class_id: data.class_id })\n                    })\n\n                    setClassrooms(objectClassroom)\n                }\n                else {\n                    console.log(res.payload)\n                }\n            })\n    }, [])\n    console.log(classrooms);\n\n    function insertClassroom(value) {\n        let class_id = location.state.login_id + Date.now();\n        let body = {\n            nick: location.state.login_id,\n            belonged_classes: [{ title: value, class_id: class_id }]\n        }\n\n        dispatch(addClassroom(body))\n            .then(res => {\n                console.log(\"업데이트 ->\")\n\n                console.log(res.payload);\n                if (res.payload.updateSuccess) {\n                    setClassrooms(preClassrooms => [...preClassrooms, body.belonged_classes[0]]);\n                }\n                else {\n                    alert(res.payload.message)\n                }\n            }).catch(err => {\n                console.log(err)\n            })\n\n        let class_body = {\n            name: value,\n            classroom_master: location.state.login_id,\n            class_id: class_id\n        }\n\n        dispatch(createClassroom(class_body))\n            .then(res => {\n                console.log(\"강의실 ->\")\n                console.log(res.payload);\n                if (res.payload.createClassroom) {\n                    setClass_id(class_body.class_id);\n                    console.log(res.payload.message);\n                }\n                else {\n                    console.log(res.payload.message)\n                }\n            }).catch((err) => {\n                console.log(err);\n            });\n\n    }\n\n\n\n\n    let text_data = [\n        { id: 1, label: \"강의실명\", name: \"classroom\", value: '' }\n    ]\n\n    if (mode == 'teacher') {\n        startpage = 'student';\n        add_button = [\n            <div className=\"add_class_box\" key=\"add\">\n                <CoreDialog key=\"add\" button_box=\"add_class_box\" button_value=\"+\"\n                    dialog_title=\"강의실 추가하기\" text_data={text_data} handleFormSubmit={function (classroom) {\n                        insertClassroom(classroom[0].value);\n\n                    }} />\n\n            </div>\n\n        ]\n    }\n    // 툴바 모드 바꿔주기 \n    else if (mode == 'student') {\n        startpage = 'workbook';\n        toolbar[1].title = 'FeedBank';\n        toolbar[0].link = '/student/my';\n        toolbar[1].link = '/student/feedbank';\n\n    }\n\n    const class_list = classrooms.map((classroom, index) =>\n        <div className=\"click_box\" key={index}>\n            <span className=\"link\" key={index}\n                onClick={() => {\n                    history.push({\n                        pathname: \"../../mainpage/\" + mode + \"/\" + startpage,\n                        state: {\n                            classroom_title: classroom.title,\n                            id: location.state.login_id,\n                            class_id: classroom.class_id\n                        }\n                    })\n                }}\n            >{classroom.title}</span>\n        </div>);\n\n\n    console.log('강의실렌더링');\n\n\n\n    return (\n        <div>\n            <Toolbar data={toolbar} />\n\n            <div className=\"classroom_box\">\n                <Core_Logo />\n                <div className=\"content\">\n\n                    <div className=\"title_box\">\n                        <span>나의 강의실</span>\n                    </div>\n                    {class_list}\n                    {add_button}\n                </div>\n            </div>\n        </div>\n    );\n\n};\n\nexport default ClassRoom;"]},"metadata":{},"sourceType":"module"}